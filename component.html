<!DOCTYPE html>
<html>
<head>
    <meta charSet="utf-8"/>
    <title>brookjs - component</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.0.0/normalize.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/brookjs/css/docs.css">
<link rel="stylesheet" href="/brookjs/css/prism-solarizedlight.css" type="text/css"></head>
<body>
<div class="content">
    <div class="menu">
        <header class="logo">
            <code>brookjs</code>
        </header>
        <nav class="menu-nav">
                <ul class="nav">
                    <span>Introduction</span>
                    <ul class="nav">
                            <li>
                                <a href="/brookjs/index.html">Meet <code>brookjs</code></a>
                            </li>
                            <li>
                                <a href="/brookjs/changelog.html">Changelog</a>
                            </li>
                    </ul>
                </ul>
                <ul class="nav">
                    <span>Writing a <code>brookjs</code> Component</span>
                    <ul class="nav">
                            <li>
                                <a href="/brookjs/what-is-a-component.html">What is a Component?</a>
                            </li>
                            <li>
                                <a href="/brookjs/defining-a-component.html">Defining a Component</a>
                            </li>
                            <li>
                                <a href="/brookjs/writing-a-components-html.html">Writing a Component's HTML</a>
                            </li>
                            <li>
                                <a href="/brookjs/adding-events-to-a-component.html">Adding <code>events</code> to a Component</a>
                            </li>
                            <li>
                                <a href="/brookjs/using-a-template-to-render-a-component.html">Using a Template to <code>render</code> a Component</a>
                            </li>
                            <li>
                                <a href="/brookjs/managing-children-components-in-a-component.html">Managing <code>children</code> Components</a>
                            </li>
                    </ul>
                </ul>
                <ul class="nav">
                    <span>Building a <code>brookjs</code> Application</span>
                    <ul class="nav">
                            <li>
                                <a href="/brookjs/connecting-a-redux-store-to-the-view.html">Connecting a Redux Store to the View</a>
                            </li>
                            <li>
                                <a href="/brookjs/implementing-side-effects-with-custom-delta.html">Implementing Side Effects with Custom Delta</a>
                            </li>
                            <li>
                                <a href="/brookjs/building-the-reducer-with-combineActionReducers.html">Building the Reducer with <code>combineActionReducers</code></a>
                            </li>
                            <li>
                                <a href="/brookjs/bootstrapping-the-application.html">Bootstrapping the Application</a>
                            </li>
                    </ul>
                </ul>
                <ul class="nav">
                    <span>Advanced Component Techniques</span>
                    <ul class="nav">
                            <li>
                                <a href="/brookjs/custom-components-with-blackboxing-and-onmount.html">Custom Components with Blackboxing and <code>onMount</code></a>
                            </li>
                            <li>
                                <a href="/brookjs/animating-a-component.html">Animating a Component</a>
                            </li>
                    </ul>
                </ul>
                <ul class="nav">
                    <span>API</span>
                    <ul class="nav">
                            <li>
                                <a href="/brookjs/component.html">component</a>
                            </li>
                            <li>
                                <a href="/brookjs/observeDelta.html">observeDelta</a>
                            </li>
                            <li>
                                <a href="/brookjs/events.html">events</a>
                            </li>
                            <li>
                                <a href="/brookjs/render.html">render</a>
                            </li>
                            <li>
                                <a href="/brookjs/children.html">children</a>
                            </li>
                            <li>
                                <a href="/brookjs/combineActionReducers.html">combineActionReducers</a>
                            </li>
                            <li>
                                <a href="/brookjs/action.html">action</a>
                            </li>
                            <li>
                                <a href="/brookjs/helpers.html">helpers</a>
                            </li>
                    </ul>
                </ul>
        </nav>
    </div>

    <div class="page">
        <h1><code>component</code></h1>
        <main class="page-content">
            <p>The <code>component</code> module exports a factory method, providing a declarative way of generating <code>Kefir.Observable</code>s to manage the application UI lifecycle. They are designed to mount an already rendered DOM, with the server providing the DOM and a <code>Kefir.Observable</code> of component props.</p>
<p><code>component</code> factories can be composed of several <code>Kefir.Observable</code>-returning functions, described below, which form a <code>Kefir.Observable</code>-returning function of its own. All of the  configuration is optional; a <code>component</code> that doesnâ€™t do anything may not be particularly useful, but it is valid.</p>
<h2 id="Word-of-Warning"><a href="#Word-of-Warning" class="headerlink" title="Word of Warning"></a>Word of Warning</h2><p>The implementation details for these functions are subject to change. Using the <code>brookjs</code> modules to describe the component lifecycle is recommended, as these will be updated along with the implementation details. The long-term goal is to develop these modules for stability &amp; stand-alone use, but right now, the component and the dependent modules are coupled to one another and are intended to absorb any churn in the way <code>component</code> wires them all together. Use these tools accordingly.</p>
<h1 id="How-to-Use"><a href="#How-to-Use" class="headerlink" title="How to Use"></a>How to Use</h1><p>A <code>component</code> factory function is generated by passing an configuration object into the factory method.</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// dummy.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Kefir<span class="token punctuation">,</span> component<span class="token punctuation">,</span> events<span class="token punctuation">,</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'brookjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> template <span class="token keyword">from</span> <span class="token string">'./index.hbs'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  events<span class="token punctuation">:</span> <span class="token function">events</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    onClick<span class="token punctuation">:</span> evt$ <span class="token operator">=</span><span class="token operator">></span> evt$<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'DUMMY_CLICK'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  render<span class="token punctuation">:</span> <span class="token function">render</span><span class="token punctuation">(</span>template<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Somewhere else, mount the component to its element and subscribe to its actions:</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// app.js</span>
<span class="token keyword">import</span> DummyComponent <span class="token keyword">from</span> <span class="token string">'./dummy'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> __INITIAL_STATE__ <span class="token punctuation">}</span> <span class="token operator">=</span> global<span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">DummyComponent</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> __INITIAL_STATE__<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> sub <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token punctuation">:</span> action <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Each of these configuration options have an associated <code>brookjs</code> module, which exports a factory method for generating these functions from a configuration.</p>
<ul>
<li><a href="render.html">brookjs/render</a></li>
<li><a href="events.html">brookjs/events</a></li>
<li><a href="children.html">brookjs/children</a></li>
</ul>
<h2 id="Configuration-Object"><a href="#Configuration-Object" class="headerlink" title="Configuration Object"></a>Configuration Object</h2><p>The configuration object defines the behavior of the component over its lifecycle. All stream generating functions provide ways of emitting values into the component stream. All of the properties of the configuration object are optional.</p>
<p><em>Note: <strong>All functions must be curried.</strong> <code>brookjs</code> relies on <a href="ramdajs.com"><code>ramda</code></a> for functional programming helpers, and highly recommends using the same. Use <a href="https://www.npmjs.com/package/babel-plugin-ramda" target="_blank" rel="external"><code>babel-plugin-ramda</code></a> to ensure the smallest possible build.</em></p>
<ul>
<li><code>{Function}</code> events - <code>events$</code> stream returning function. Called with the element and should return a stream of events from the DOM. The top level element will not change during the lifecycle of the component, but any underlying element can, so any custom event implementation should use event delegation.<ul>
<li>Parameters:<ul>
<li><code>{Element}</code> el - Component element.</li>
</ul>
</li>
<li>Returns:<ul>
<li><code>{Kefir.Observable}</code> Observable of events from the element.</li>
</ul>
</li>
</ul>
</li>
<li><code>{Function}</code> render - <code>render$</code> stream returning function. Called with  the component element <code>el</code> and the <code>props$</code> stream.<ul>
<li>Parameters:<ul>
<li><code>{Element}</code> el - Component element.</li>
<li><code>{Kefir.Observable&lt;props&gt;}</code> props$ - Previous component props.</li>
</ul>
</li>
<li>Returns:<ul>
<li><code>{Kefir.Observable}</code> Observable of renders from the element. Should emit no actions.</li>
</ul>
</li>
</ul>
</li>
<li><code>{Function}</code> children - <code>children$</code> stream returning function. Called once, when the component is mounted, passing the component element <code>el</code>.<ul>
<li>Parameters:<ul>
<li><code>{Element}</code> el - Component element.</li>
<li><code>{Kefir.Observable}</code> props$ - Observable of props. Used to render children.</li>
</ul>
</li>
<li>Returns:<ul>
<li><code>{Kefir.Observable}</code> Observable of events from the children. Does not need to end.</li>
</ul>
</li>
</ul>
</li>
<li><code>{Function}</code> combinator - Hook to combine streams before returning them from the factory. Merges the streams by default.<ul>
<li>Paramters:<ul>
<li><code>{Object}</code> streams - Object containing a property for each component stream, including <code>events$</code>, <code>children$</code>, and <code>onMount$</code>. Should return a new stream combining the provided events. Provides a hook to coordinate stream events, if necessary.</li>
</ul>
</li>
</ul>
</li>
<li><code>{Function}</code> onMount - <code>onMount$</code> stream returning function. Called once, when the component is mounted, providing an entry point for any custom events. <code>onMount</code> should avoid doing any direct DOM manipulation unless the component is blackboxed, in which case, <code>onMount</code> can provide custom render logic as well.<ul>
<li>Parameters:<ul>
<li><code>{Element}</code> el - Componenent element.</li>
<li><code>{Kefir.Observable}</code> props$ - Observable of props. Used to render children.</li>
</ul>
</li>
<li>Returns:<ul>
<li><code>{Kefir.Observable}</code> - Observable of events from the component.</li>
</ul>
</li>
</ul>
</li>
</ul>

        </main>
    </div>
</div>

<footer class="brk-footer">
    <a class="footer" href="https://github.com/valtech-nyc/brookjs">
        Project on github
    </a>

    <div class="switch-page">
    </div>
</footer>
</body>
</html>
