---
to: <%= name %>/<%= dir %>/app.js
---
import '@babel/polyfill';
import React from 'react';
import { observeDelta, eddy, combineReducers, fromReduxStore } from 'brookjs';
import { RootJunction } from 'brookjs-silt';
import { applyMiddleware, createStore } from 'redux';
import { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';
import ReactDOM from 'react-dom';
import { init } from './actions';
import {} from './deltas';
import {} from './reducers';
import {} from './selectors';

const { __INITIAL_STATE__ } = global;

const compose = composeWithDevTools({
  name: '<%= name %>'
});

const enhancer = compose(applyMiddleware(observeDelta()), eddy());

const reducer = combineReducers({});

const store = createStore(reducer, __INITIAL_STATE__, enhancer);
const state$ = fromReduxStore(store);

ReactDOM.render(
  <RootJunction silt-embeddable root$={root$ => root$.observe(store.dispatch)}>
    {state$.map(state => (
      <pre>
        <code>{JSON.stringify(state)}</code>
      </pre>
    ))}
  </RootJunction>,
  document.getElementById('app')
);

store.dispatch(init());
