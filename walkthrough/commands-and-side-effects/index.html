<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/brookjs/styles.2543ff947a193d7f33b1.css">@import url(https://fonts.googleapis.com/css?family=Inconsolata&display=swap);@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap);</style><meta name="generator" content="Gatsby 2.19.12"/><title data-rh="true">Commands &amp; Side Effects | Brookjs</title><meta data-rh="true" name="description" content="reactive programming tools for well-structured, testable applications"/><meta data-rh="true" property="og:title" content="Commands &amp; Side Effects"/><meta data-rh="true" property="og:description" content="reactive programming tools for well-structured, testable applications"/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" name="twitter:card" content="summary"/><meta data-rh="true" name="twitter:title" content="Commands &amp; Side Effects"/><meta data-rh="true" name="twitter:description" content="reactive programming tools for well-structured, testable applications"/><link as="script" rel="preload" href="/brookjs/webpack-runtime-b0db3b51dc7c95cf7334.js"/><link as="script" rel="preload" href="/brookjs/styles-bc9efc78aabfe25d0656.js"/><link as="script" rel="preload" href="/brookjs/app-4a161c38004cbf5ff7a7.js"/><link as="script" rel="preload" href="/brookjs/commons-53a4b81a8807be35b09f.js"/><link as="script" rel="preload" href="/brookjs/component---docs-walkthrough-07-commands-and-side-effects-mdx-37ef0ecebb2b52fa7293.js"/><link as="fetch" rel="preload" href="/brookjs/page-data/walkthrough/commands-and-side-effects/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="1ouyflx">.css-1ouyflx{font-family:'Source Sans Pro',sans-serif;font-size:20px;font-weight:400;line-height:1.5;color:var(--theme-ui-colors-text,#2D3747);background-color:var(--theme-ui-colors-background,#FFFFFF);}</style><div class="css-1ouyflx"><style data-emotion-css="jrjj6h">.css-jrjj6h > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="1ubpee3">.css-1ubpee3{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-1ubpee3 > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="hbri28">.css-hbri28{box-sizing:border-box;min-width:0;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-hbri28 > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><div data-testid="layout" class="css-hbri28"><style data-emotion-css="1xva7m0">body{margin:0;padding:0;}.icon-link{display:none;}.with-overlay{overflow:hidden;}</style><style data-emotion-css="zf0iqh">.css-zf0iqh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><style data-emotion-css="1tjxv7i">.css-1tjxv7i{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><style data-emotion-css="238csb">.css-238csb{box-sizing:border-box;min-width:0;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><main class="css-238csb"><style data-emotion-css="18wmtq">.css-18wmtq{background-color:var(--theme-ui-colors-header-bg,#F5F6F7);position:relative;z-index:1;border-bottom:1px solid var(--theme-ui-colors-border,#CED4DE);}</style><div data-testid="header" class="css-18wmtq"><style data-emotion-css="zankq9">.css-zankq9{display:none;position:absolute;top:calc(100% + 15px);left:30px;}@media screen and (max-width:57.5em){.css-zankq9{display:block;}}</style><style data-emotion-css="1s0wdqz">.css-1s0wdqz{box-sizing:border-box;min-width:0;display:none;position:absolute;top:calc(100% + 15px);left:30px;}@media screen and (max-width:57.5em){.css-1s0wdqz{display:block;}}</style><div class="css-1s0wdqz"><style data-emotion-css="4019lz">.css-4019lz{padding:0;outline:none;background:transparent;border:none;color:var(--theme-ui-colors-header-text,#2D3747);opacity:0.5;cursor:pointer;}.css-4019lz:hover{cursor:pointer;}</style><button class="css-4019lz"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div><style data-emotion-css="z6jak6">.css-z6jak6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding-left:32px;padding-right:32px;position:relative;height:80px;}</style><div class="css-z6jak6"><style data-emotion-css="xenp3v">.css-xenp3v{-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;font-size:24px;}</style><style data-emotion-css="1abzlu">.css-1abzlu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;font-size:24px;}</style><style data-emotion-css="ug0363">.css-ug0363{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;font-size:24px;}</style><div data-testid="logo" class="css-ug0363"><style data-emotion-css="gyijir">.css-gyijir{font-weight:600;color:var(--theme-ui-colors-header-text,#2D3747);-webkit-text-decoration:none;text-decoration:none;}.css-gyijir:hover{color:var(--theme-ui-colors-primary,#0B5FFF);}</style><a class="css-gyijir" href="/brookjs/">Brookjs</a></div><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><style data-emotion-css="80zs6q">.css-80zs6q{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-80zs6q"><style data-emotion-css="1is33jg">.css-1is33jg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:12px;border:none;border-radius:9999px;background-color:var(--theme-ui-colors-header-button-bg,#0B5FFF);color:var(--theme-ui-colors-header-button-color,#FFFFFF);font-size:12px;font-weight:600;cursor:pointer;}</style><button class="css-1is33jg"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div></div></div><style data-emotion-css="w2cmj1">.css-w2cmj1{padding-top:0;padding-bottom:0;-webkit-flex:1;-ms-flex:1;flex:1;display:grid;grid-template-columns:250px 1fr;min-height:100vh;}@media screen and (max-width:57.5em){.css-w2cmj1{display:block;}}</style><div class="css-w2cmj1"><style data-emotion-css="1tn7q1x">.css-1tn7q1x{z-index:999;position:fixed;top:81px;right:0;bottom:0;left:0;background:rgba(0,0,0,0.6);-webkit-transition:all .2s ease-out;transition:all .2s ease-out;visibility:hidden;opacity:0;}</style><style data-emotion-css="h4snl3">.css-h4snl3{box-sizing:border-box;min-width:0;z-index:999;position:fixed;top:81px;right:0;bottom:0;left:0;background:rgba(0,0,0,0.6);-webkit-transition:all .2s ease-out;transition:all .2s ease-out;visibility:hidden;opacity:0;}</style><div class="css-h4snl3"></div><style data-emotion-css="1ethd5x">.css-1ethd5x{padding-top:32px;padding-bottom:32px;padding-left:32px;padding-right:32px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:-webkit-sticky;position:sticky;top:0;z-index:1;min-width:0;max-height:100vh;border-right:1px solid var(--theme-ui-colors-border,#CED4DE);overflow:auto;-webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-sidebar-bg,#FFFFFF);}@media screen and (max-width:57.5em){.css-1ethd5x{z-index:9999;display:block;position:fixed;top:81px;left:0;bottom:0;width:256px;padding-left:32px;padding-right:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);}}</style><style data-emotion-css="1li9yso">.css-1li9yso{box-sizing:border-box;min-width:0;padding-top:32px;padding-bottom:32px;padding-left:32px;padding-right:32px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:-webkit-sticky;position:sticky;top:0;z-index:1;min-width:0;max-height:100vh;border-right:1px solid var(--theme-ui-colors-border,#CED4DE);overflow:auto;-webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-sidebar-bg,#FFFFFF);}@media screen and (max-width:57.5em){.css-1li9yso{z-index:9999;display:block;position:fixed;top:81px;left:0;bottom:0;width:256px;padding-left:32px;padding-right:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);}}</style><div data-testid="sidebar" class="css-1li9yso"><style data-emotion-css="lcm9hh">.css-lcm9hh{margin-bottom:16px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div data-testid="nav-search" class="css-lcm9hh"><style data-emotion-css="1mo6uhh">.css-1mo6uhh{color:var(--theme-ui-colors-border,#CED4DE);margin-right:8px;}</style><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-1mo6uhh"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><style data-emotion-css="1bbueiu">.css-1bbueiu{outline:none;background:none;border:none;color:var(--theme-ui-colors-text,#2D3747);font-size:14px;}</style><input placeholder="Type to search..." value="" class="css-1bbueiu"/></div><style data-emotion-css="1rqvyud">.css-1rqvyud{margin-top:8px;margin-bottom:8px;display:block;color:var(--theme-ui-colors-sidebar-navGroup,#2D3747);-webkit-text-decoration:none;text-decoration:none;font-size:16px;}.css-1rqvyud.active{color:var(--theme-ui-colors-sidebar-navLinkActive,#0B5FFF);}</style><a class="css-1rqvyud" href="/brookjs/">Home</a><a class="css-1rqvyud" href="/brookjs/quickstart/">Quickstart</a><a class="css-1rqvyud" href="/brookjs/changelog/">Changelog</a><style data-emotion-css="1ebprri">.css-1ebprri{margin-top:16px;margin-bottom:16px;}</style><div data-testid="nav-group" class="css-1ebprri"><style data-emotion-css="1c8kbwa">.css-1c8kbwa{margin-bottom:4px;font-size:16px;font-weight:500;color:var(--theme-ui-colors-sidebar-navGroup,#2D3747);cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-1c8kbwa">Walkthrough<style data-emotion-css="cu2sly">.css-cu2sly{margin-left:4px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-align-self:baseline;-ms-flex-item-align:baseline;align-self:baseline;-webkit-transform:rotateX(0deg);-ms-transform:rotateX(0deg);transform:rotateX(0deg);-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transition:-webkit-transform .3s ease-in-out;-webkit-transition:transform .3s ease-in-out;transition:transform .3s ease-in-out;}</style><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><style data-emotion-css="1isemmb">.css-1isemmb{margin-left:8px;}</style><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Advanced Concepts<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Philosophy<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">API<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><a class="css-1rqvyud" href="/brookjs/philosophy/actions-commands-vs-events/">Actions: Commands vs Events</a><a class="css-1rqvyud" href="/brookjs/philosophy/best-choice-is-easiest/">Best Choice is Easiest</a><a class="css-1rqvyud" href="/brookjs/advanced-concepts/building-reusable-components/">Building Reusable Components</a><a aria-current="page" class="css-1rqvyud active" href="/brookjs/walkthrough/commands-and-side-effects/">Commands &amp; Side Effects</a><style data-emotion-css="1ooej63">.css-1ooej63{margin-top:8px;margin-bottom:8px;display:block;color:var(--theme-ui-colors-sidebar-tocLink,#67788a);-webkit-text-decoration:none;text-decoration:none;font-size:14px;margin-left:16px;position:relative;}.css-1ooej63.active{color:var(--theme-ui-colors-sidebar-tocLinkActive,#1D2330);}.css-1ooej63.active::before{content:"";position:absolute;display:block;top:2px;left:-8px;height:1rem;background-color:var(--theme-ui-colors-primary,#0B5FFF);-webkit-transition:width 200ms ease 0s;transition:width 200ms ease 0s;width:2px;border-radius:1px;}</style><a class=" css-1ooej63" href="/brookjs/walkthrough/commands-and-side-effects/#note-about-immediate-actions">Note About Immediate Actions</a><a class="css-1rqvyud" href="/brookjs/philosophy/components-compose-bottom-up/">Components Compose Bottom Up</a><a class="css-1rqvyud" href="/brookjs/walkthrough/data-in-data-out/">Data In–Data Out</a><a class="css-1rqvyud" href="/brookjs/walkthrough/expressing-change-through-observables/">Expressing Change Through Observables</a><a class="css-1rqvyud" href="/brookjs/advanced-concepts/fractalizing-your-application/">Fractalizing Your Application</a><a class="css-1rqvyud" href="/brookjs/walkthrough/introduction/">Introduction</a><a class="css-1rqvyud" href="/brookjs/walkthrough/props-to-observables/">Props to Observables</a><a class="css-1rqvyud" href="/brookjs/advanced-concepts/reactive-refs-and-animations-with-withref$/">Reactive Refs &amp; Animations with `withRef$`</a><a class="css-1rqvyud" href="/brookjs/philosophy/seamless-interop/">Seamless Interop</a><a class="css-1rqvyud" href="/brookjs/walkthrough/static-typing-with-flow/">Static Typing with Flow</a><a class="css-1rqvyud" href="/brookjs/walkthrough/testing-unit-and-integration/">Testing: Unit &amp; Integration</a><a class="css-1rqvyud" href="/brookjs/walkthrough/todo-list/">Todo List</a><a class="css-1rqvyud" href="/brookjs/advanced-concepts/using-third-party-components/">Using 3rd Party Components</a><a class="css-1rqvyud" href="/brookjs/walkthrough/using-the-cli/">Using the CLI</a><a class="css-1rqvyud" href="/brookjs/walkthrough/what-are-observables/">What are Observables?</a><a class="css-1rqvyud" href="/brookjs/api/babel-preset-brookjs/">babel-preset-brookjs</a><a class="css-1rqvyud" href="/brookjs/api/brookjs/">brookjs</a><a class="css-1rqvyud" href="/brookjs/api/brookjs-cli/">brookjs-cli</a><a class="css-1rqvyud" href="/brookjs/api/brookjs-desalinate/">brookjs-desalinate</a><a class="css-1rqvyud" href="/brookjs/api/brookjs-silt/">brookjs-silt</a></div><style data-emotion-css="1w3d2mg">.css-1w3d2mg{background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-1w3d2mg{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><style data-emotion-css="kjtkh5">.css-kjtkh5{width:100%;min-width:0;max-width:1280px;margin-left:auto;margin-right:auto;padding:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-kjtkh5{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><style data-emotion-css="1307vk3">.css-1307vk3{box-sizing:border-box;min-width:0;width:100%;min-width:0;max-width:1280px;margin-left:auto;margin-right:auto;padding:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-1307vk3{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><div data-testid="main-container" class="css-1307vk3"><style data-emotion-css="1vci3bl">.css-1vci3bl{padding:0;margin:0;margin-bottom:16px;font-size:48px;font-family:'Source Sans Pro',sans-serif;line-height:1.125;font-weight:700;}</style><h1 id="commands--side-effects" class="css-1vci3bl">Commands &amp; Side Effects</h1><style data-emotion-css="cvh4i0">.css-cvh4i0{padding:0;margin:0;margin-bottom:16px;list-style-position:outside;list-style-image:none;margin-left:16px;}</style><ul class="css-cvh4i0"><style data-emotion-css="q43a5f">.css-q43a5f{margin-bottom:4px;padding-left:0;}.css-q43a5f ol{margin-top:8px;margin-bottom:8px;margin-left:16px;}.css-q43a5f ul{margin-top:8px;margin-bottom:8px;margin-left:16px;}.css-q43a5f p{margin-bottom:8px;}</style><li class="css-q43a5f">Save todo logic</li><li class="css-q43a5f">Add store enhancer to Redux store</li><li class="css-q43a5f">Update reducer to return command</li><li class="css-q43a5f">Note on testability<ul class="css-cvh4i0"><li class="css-q43a5f">Returns <em class="css-0">description</em> of side effect</li><li class="css-q43a5f">&quot;what happened&quot; vs &quot;what happens next&quot;</li><li class="css-q43a5f">Logic of how application changes over time remains in store</li><li class="css-q43a5f">Still easy to test</li></ul></li><li class="css-q43a5f">Add delta to respond to command<ul class="css-cvh4i0"><li class="css-q43a5f">Wait 3 seconds and emit failure or success randomly</li></ul></li><li class="css-q43a5f">Add success checkbox or error message</li><li class="css-q43a5f">CodeSandbox example</li></ul><style data-emotion-css="1ftn47p">.css-1ftn47p{padding:0;margin:0;margin-bottom:16px;}</style><p class="css-1ftn47p">To handle custom side effects, create a custom delta. To do so, create a function that takes an options object and returns a function that takes a stream of <style data-emotion-css="ueqitl">.css-ueqitl{font-family:Inconsolata;}</style><code class="css-ueqitl">actions$</code> and <code class="css-ueqitl">state$</code>. The returned function should return its own stream of <code class="css-ueqitl">actions$</code> that will be piped into the store.</p><p class="css-1ftn47p"><code class="css-ueqitl">observeDelta</code> also comes with a helper function for use with Kefir&#x27;s <code class="css-ueqitl">thru</code> method. <code class="css-ueqitl">ofType</code> takes a varying number of string constants to compare against <code class="css-ueqitl">action.type</code> and returns a function that can be passed to <code class="css-ueqitl">thru</code>. This function will filter the provided observable by the provided types. See below for an example.</p><div><style data-emotion-css="1h0sj8d">.css-1h0sj8d{padding:16px;margin:0;margin-bottom:32px;font-size:85%;margin-top:32px;text-align:left;font-family:Inconsolata;border-radius:4px;}.css-1h0sj8d dark{[object Object];}.css-1h0sj8d light{[object Object];}</style><pre class="language-js prism-code language-js css-1h0sj8d" style="font-family:Inconsolata;color:#393A34;background-color:#f6f8fa;overflow-x:auto" data-testid="code"><div class="token-line" style="font-family:Inconsolata;color:#393A34"><style data-emotion-css="1baulvz">.css-1baulvz{display:inline-block;}</style><span class="token keyword module css-1baulvz" style="color:#00009f">import</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz" style="color:#393A34">{</span><span class="token plain css-1baulvz"> </span><span class="token maybe-class-name css-1baulvz">Kefir</span><span class="token punctuation css-1baulvz" style="color:#393A34">,</span><span class="token plain css-1baulvz"> ofType </span><span class="token punctuation css-1baulvz" style="color:#393A34">}</span><span class="token plain css-1baulvz"> </span><span class="token keyword module css-1baulvz" style="color:#00009f">from</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz" style="color:#e3116c">&#x27;brookjs&#x27;</span><span class="token punctuation css-1baulvz" style="color:#393A34">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line" style="font-family:Inconsolata;color:#393A34"><span class="token plain css-1baulvz"></span><span class="token keyword module css-1baulvz" style="color:#00009f">import</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz" style="color:#393A34">{</span><span class="token plain css-1baulvz"> </span><span class="token constant css-1baulvz" style="color:#36acaa">SUBMIT_FORM</span><span class="token punctuation css-1baulvz" style="color:#393A34">,</span><span class="token plain css-1baulvz"> formSubmitSuccess</span><span class="token punctuation css-1baulvz" style="color:#393A34">,</span><span class="token plain css-1baulvz"> formSubmitFail </span><span class="token punctuation css-1baulvz" style="color:#393A34">}</span><span class="token plain css-1baulvz"> </span><span class="token keyword module css-1baulvz" style="color:#00009f">from</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz" style="color:#e3116c">&#x27;./actions&#x27;</span><span class="token punctuation css-1baulvz" style="color:#393A34">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line" style="font-family:Inconsolata;color:#393A34"><span class="token plain css-1baulvz" style="display:inline-block"></span></div><div class="token-line" style="font-family:Inconsolata;color:#393A34"><span class="token plain css-1baulvz"></span><span class="token keyword module css-1baulvz" style="color:#00009f">export</span><span class="token plain css-1baulvz"> </span><span class="token keyword module css-1baulvz" style="color:#00009f">default</span><span class="token plain css-1baulvz"> </span><span class="token keyword css-1baulvz" style="color:#00009f">function</span><span class="token plain css-1baulvz"> </span><span class="token function css-1baulvz" style="color:#d73a49">ajaxDelta</span><span class="token punctuation css-1baulvz" style="color:#393A34">(</span><span class="token parameter punctuation css-1baulvz" style="color:#393A34">{</span><span class="token parameter css-1baulvz"> ajax </span><span class="token parameter punctuation css-1baulvz" style="color:#393A34">}</span><span class="token punctuation css-1baulvz" style="color:#393A34">)</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz" style="color:#393A34">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line" style="font-family:Inconsolata;color:#393A34"><span class="token plain css-1baulvz">  </span><span class="token keyword css-1baulvz" style="color:#00009f">return</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz" style="color:#393A34">(</span><span class="token parameter css-1baulvz">actions$</span><span class="token parameter punctuation css-1baulvz" style="color:#393A34">,</span><span class="token parameter css-1baulvz"> state$</span><span class="token punctuation css-1baulvz" style="color:#393A34">)</span><span class="token plain css-1baulvz"> </span><span class="token arrow operator css-1baulvz" style="color:#393A34">=&gt;</span><span class="token plain css-1baulvz"></span></div><div class="token-line" style="font-family:Inconsolata;color:#393A34"><span class="token plain css-1baulvz">    actions$</span></div><div class="token-line" style="font-family:Inconsolata;color:#393A34"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz" style="color:#393A34">.</span><span class="token method function property-access css-1baulvz" style="color:#d73a49">thru</span><span class="token punctuation css-1baulvz" style="color:#393A34">(</span><span class="token function css-1baulvz" style="color:#d73a49">ofType</span><span class="token punctuation css-1baulvz" style="color:#393A34">(</span><span class="token constant css-1baulvz" style="color:#36acaa">SUBMIT_FORM</span><span class="token punctuation css-1baulvz" style="color:#393A34">)</span><span class="token punctuation css-1baulvz" style="color:#393A34">)</span><span class="token plain css-1baulvz"></span></div><div class="token-line" style="font-family:Inconsolata;color:#393A34"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz" style="color:#393A34">.</span><span class="token method function property-access css-1baulvz" style="color:#d73a49">flatMap</span><span class="token punctuation css-1baulvz" style="color:#393A34">(</span><span class="token parameter css-1baulvz">action</span><span class="token plain css-1baulvz"> </span><span class="token arrow operator css-1baulvz" style="color:#393A34">=&gt;</span><span class="token plain css-1baulvz"> ajax</span><span class="token punctuation css-1baulvz" style="color:#393A34">.</span><span class="token method function property-access css-1baulvz" style="color:#d73a49">post</span><span class="token punctuation css-1baulvz" style="color:#393A34">(</span><span class="token string css-1baulvz" style="color:#e3116c">&#x27;/api&#x27;</span><span class="token punctuation css-1baulvz" style="color:#393A34">,</span><span class="token plain css-1baulvz"> action</span><span class="token punctuation css-1baulvz" style="color:#393A34">.</span><span class="token property-access css-1baulvz">payload</span><span class="token punctuation css-1baulvz" style="color:#393A34">)</span><span class="token punctuation css-1baulvz" style="color:#393A34">)</span><span class="token plain css-1baulvz"></span></div><div class="token-line" style="font-family:Inconsolata;color:#393A34"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz" style="color:#393A34">.</span><span class="token method function property-access css-1baulvz" style="color:#d73a49">map</span><span class="token punctuation css-1baulvz" style="color:#393A34">(</span><span class="token plain css-1baulvz">formSubmitted</span><span class="token punctuation css-1baulvz" style="color:#393A34">)</span><span class="token plain css-1baulvz"></span></div><div class="token-line" style="font-family:Inconsolata;color:#393A34"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz" style="color:#393A34">.</span><span class="token method function property-access css-1baulvz" style="color:#d73a49">flatMapErrors</span><span class="token punctuation css-1baulvz" style="color:#393A34">(</span><span class="token parameter css-1baulvz">err</span><span class="token plain css-1baulvz"> </span><span class="token arrow operator css-1baulvz" style="color:#393A34">=&gt;</span><span class="token plain css-1baulvz"> </span><span class="token maybe-class-name css-1baulvz">Kefir</span><span class="token punctuation css-1baulvz" style="color:#393A34">.</span><span class="token method function property-access css-1baulvz" style="color:#d73a49">constant</span><span class="token punctuation css-1baulvz" style="color:#393A34">(</span><span class="token function css-1baulvz" style="color:#d73a49">formSubmitFail</span><span class="token punctuation css-1baulvz" style="color:#393A34">(</span><span class="token plain css-1baulvz">err</span><span class="token punctuation css-1baulvz" style="color:#393A34">)</span><span class="token punctuation css-1baulvz" style="color:#393A34">)</span><span class="token punctuation css-1baulvz" style="color:#393A34">)</span><span class="token punctuation css-1baulvz" style="color:#393A34">;</span><span class="token plain css-1baulvz"></span></div><div class="token-line" style="font-family:Inconsolata;color:#393A34"><span class="token plain css-1baulvz"></span><span class="token punctuation css-1baulvz" style="color:#393A34">}</span></div></pre></div><p class="css-1ftn47p">Providing the ajax service through the <code class="css-ueqitl">ajaxDelta</code> options object keeps the delta pure, making it easier to test that the delta functions as expected without having to mock the XMLHttpRequest object itself. The <code class="css-ueqitl">ajax</code> service itself can then be isolated and tested against the mock object, reducing the amount of work done by each set of unit tests.</p><h2 id="note-about-immediate-actions"><style data-emotion-css="1r0pe6c">.css-1r0pe6c{color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-1r0pe6c:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="#note-about-immediate-actions" class="css-1r0pe6c">Note About Immediate Actions</a></h2><p class="css-1ftn47p">If you need to emit an action immediately, ensure you&#x27;re not doing so on the synchronous generation of the delta stream, e.g. route parsing or cookie reading usually handled on application startup. If you do, you may run into odd behavior, as the delta has not yet been fully plugged together and may result in actions either not getting dispatched properly to other deltas or even the store itself. As recommended in <style data-emotion-css="1iv9jyz">.css-1iv9jyz{color:var(--theme-ui-colors-primary,#0B5FFF);-webkit-text-decoration:none;text-decoration:none;}.css-1iv9jyz:hover{color:secondary;-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="bootstrapping-the-application.html" class="css-1iv9jyz">&quot;bootstrapping the application&quot;</a>, use an &quot;INIT&quot; action of some kind and respond to that to handle these initial reads.</p></div></div></main></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/walkthrough/commands-and-side-effects/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-4a161c38004cbf5ff7a7.js"],"component---docs-01-index-mdx":["/component---docs-01-index-mdx-edf049a0b55d18e80269.js"],"component---docs-02-quickstart-mdx":["/component---docs-02-quickstart-mdx-0e6ff9a99e57c159eb5c.js"],"component---docs-03-changelog-mdx":["/component---docs-03-changelog-mdx-0a6c69d121b24816ed2c.js"],"component---docs-advanced-concepts-01-reactive-refs-with-withref-mdx":["/component---docs-advanced-concepts-01-reactive-refs-with-withref-mdx-7d233383d6c7aaf73ff0.js"],"component---docs-advanced-concepts-02-using-third-party-components-mdx":["/component---docs-advanced-concepts-02-using-third-party-components-mdx-1dd03f6668a912677a7f.js"],"component---docs-advanced-concepts-03-fractalizing-your-application-mdx":["/component---docs-advanced-concepts-03-fractalizing-your-application-mdx-3c7b049d6555b915c9d8.js"],"component---docs-advanced-concepts-04-building-reusable-components-mdx":["/component---docs-advanced-concepts-04-building-reusable-components-mdx-dcb4b6df03aaaaf40258.js"],"component---docs-api-01-brookjs-mdx":["/component---docs-api-01-brookjs-mdx-3f4785544c09004d5afc.js"],"component---docs-api-02-brookjs-desalinate-mdx":["/component---docs-api-02-brookjs-desalinate-mdx-4fdb53495d73db72b3ed.js"],"component---docs-api-03-brookjs-cli-mdx":["/component---docs-api-03-brookjs-cli-mdx-a987e2d53e35a76544da.js"],"component---docs-api-04-brookjs-silt-mdx":["/component---docs-api-04-brookjs-silt-mdx-cd2e86f98d61f672a65a.js"],"component---docs-api-05-babel-preset-brookjs-mdx":["/component---docs-api-05-babel-preset-brookjs-mdx-448c54a4efdfddb98263.js"],"component---docs-philosophy-01-actions-commands-vs-events-mdx":["/component---docs-philosophy-01-actions-commands-vs-events-mdx-647732e80eecc33050d7.js"],"component---docs-philosophy-02-components-compose-bottom-up-mdx":["/component---docs-philosophy-02-components-compose-bottom-up-mdx-422a23052cd6bacfa18a.js"],"component---docs-philosophy-03-best-choice-is-easiest-mdx":["/component---docs-philosophy-03-best-choice-is-easiest-mdx-84e2d075e68ca7725ebc.js"],"component---docs-philosophy-04-seamless-interop-mdx":["/component---docs-philosophy-04-seamless-interop-mdx-3ab5fa42399529d434c9.js"],"component---docs-walkthrough-01-introduction-mdx":["/component---docs-walkthrough-01-introduction-mdx-2c5f0cbea25e801db37a.js"],"component---docs-walkthrough-02-observables-mdx":["/component---docs-walkthrough-02-observables-mdx-3067124e66adfd34251d.js"],"component---docs-walkthrough-03-props-to-observables-mdx":["/component---docs-walkthrough-03-props-to-observables-mdx-450c1dca9f3303f2fc7a.js"],"component---docs-walkthrough-04-expressing-change-through-observables-mdx":["/component---docs-walkthrough-04-expressing-change-through-observables-mdx-fb267422d598a57cb3ba.js"],"component---docs-walkthrough-05-data-in-data-out-mdx":["/component---docs-walkthrough-05-data-in-data-out-mdx-bcd56a446bdfd9e55589.js"],"component---docs-walkthrough-06-todo-list-mdx":["/component---docs-walkthrough-06-todo-list-mdx-6027aa6e0b6b8e883246.js"],"component---docs-walkthrough-07-commands-and-side-effects-mdx":["/component---docs-walkthrough-07-commands-and-side-effects-mdx-37ef0ecebb2b52fa7293.js"],"component---docs-walkthrough-08-using-the-cli-mdx":["/component---docs-walkthrough-08-using-the-cli-mdx-0d8fe1393088e71bad38.js"],"component---docs-walkthrough-09-testing-unit-and-integration-mdx":["/component---docs-walkthrough-09-testing-unit-and-integration-mdx-90a83e5c4acc22c8b918.js"],"component---docs-walkthrough-10-static-typing-with-flow-mdx":["/component---docs-walkthrough-10-static-typing-with-flow-mdx-73f4921128a6dfe0058f.js"],"component---src-pages-404-js":["/component---src-pages-404-js-8a98e1c0171c2c993a7e.js"]};/*]]>*/</script><script src="/brookjs/component---docs-walkthrough-07-commands-and-side-effects-mdx-37ef0ecebb2b52fa7293.js" async=""></script><script src="/brookjs/commons-53a4b81a8807be35b09f.js" async=""></script><script src="/brookjs/app-4a161c38004cbf5ff7a7.js" async=""></script><script src="/brookjs/styles-bc9efc78aabfe25d0656.js" async=""></script><script src="/brookjs/webpack-runtime-b0db3b51dc7c95cf7334.js" async=""></script></body></html>